var Contact=Backbone.Model.extend({idAttribute:"_id",defaults:{name:"???",phone:"(999) 999-9999",bio:"Pork belly PBR shabby chic Williamsburg, American Apparel asymmetrical DIY cardigan gastropub aesthetic Echo Park forage selvage whatever keytar. Carles authentic craft beer Helvetica artisan, ethical selfies Neutra seitan High Life. Squid 90's fixie, lomo Godard hashtag PBR&B church-key tousled master cleanse leggings raw denim Odd Future PBR +1. Fixie Neutra 3 wolf moon, Marfa Intelligentsia whatever hashtag flannel DIY bespoke. Lo-fi pork belly brunch flannel Williamsburg scenester, street art post-ironic hoodie Tumblr. VHS Carles fingerstache, shabby chic selfies fashion axe yr Shoreditch locavore before they sold out PBR&B paleo. Organic meh forage selvage hashtag artisan, tofu typewriter craft beer yr messenger bag.",avatar:"http://i500.listal.com/image/2433041/500full.jpg"}}),ContactsCollection=Backbone.Collection.extend({model:Contact,url:"http://0.0.0.0:3000/collections/contacts"}),ListView=Backbone.View.extend({className:"list-item",createTemplate:_.template($("#list-item-template").text()),events:{"click .js-to-jumbotron":"toJumbotron","click .delete":"destroy","click .edit":"editContact","click .js-submit-edit":"saveEdit","click .js-cancel-edit":"cancelEdit"},initialize:function(){$(".js-contact-list").append(this.el),this.render(),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)},render:function(){this.$el.html(this.createTemplate(this.model.attributes))},toJumbotron:function(){new MainView({model:this.model})},destroy:function(){this.model.destroy()},editContact:function(){var a=_.template($("#edit-item-template").text());$(".js-focus-item").html(this.el),this.$el.html(a(this.model.attributes)),this.$el.find("#js-edit-name").focus()},saveEdit:function(){var a=this.$el.find("#js-edit-name").val(),b=this.$el.find("#js-edit-phone").val(),c=this.$el.find("#js-edit-bio").val(),d=this.$el.find("#js-edit-avatar").val();this.model.save({name:a,phone:b,bio:c,avatar:d}),new MainView({model:this.model}),new ListView({model:this.model})},cancelEdit:function(){$(".edit-info").remove(),new ListView({model:this.model})}}),MainView=Backbone.View.extend({className:"main-item",createTemplate:_.template($("#main-item-template").text()),events:{"click .clear-tron":"clearJumbotron"},initialize:function(){$(".js-focus-item").html(this.el),this.render()},render:function(){this.$el.html(this.createTemplate(this.model.attributes))},clearJumbotron:function(){this.remove()}});console.log("'Allo 'Allo!"),$(document).ready(function(){window.contacts=new ContactsCollection,contacts.fetch({success:function(){contacts.each(function(a){new ListView({model:a})})},error:function(){console.log("Whoa, problem!")}}),$(".add-new-contact").on("click",".add",function(){new AddContactView({model:this.model})}),$(".js-submit").click(function(){var a={name:$("#add-contact-form #js-new-name").val(),phone:$("#add-contact-form #js-new-phone").val(),bio:$("#add-contact-form #js-new-bio").val(),avatar:$("#add-contact-form #js-new-avatar").val()},b=contacts.add(a);new ListView({model:b}),b.save(),this.$el.find("form").val("")})});